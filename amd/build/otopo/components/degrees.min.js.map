{"version":3,"file":"degrees.min.js","sources":["../../../src/otopo/components/degrees.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Otopo vue degrees.\n *\n * @copyright   2024 Nantes Universit√© <support-tice@univ-nantes.fr> (Commissioner)\n * @copyright   2024 E-learning Touch' <contact@elearningtouch.com> (Maintainer)\n * @copyright   2022 Kosmos <moodle@kosmos.fr> (Former maintainer)\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['mod_otopo/otopo/components/degree-modal'], function(DegreeModalHelp) {\n    return {\n        components: {\n            'DegreeModalHelp': DegreeModalHelp,\n        },\n        props: {\n            degrees: {\n                type: Array\n            },\n            itemName: {\n                type: String,\n            },\n            color: {\n                type: String,\n            },\n            degree: {\n                type: Number,\n                'default': null,\n            },\n            disabled: {\n                type: Boolean,\n                'default': false,\n            }\n        },\n        data: function() {\n            return {\n                images: this.$root.$data.images,\n                strings: this.$root.$data.strings,\n                selected: this.degree ? parseInt(Object.keys(this.degrees)\n                    .find(key => this.degrees[key].id === this.degree)) : null,\n                showModal: false\n            };\n        },\n        methods: {\n            selectNext() {\n                if (this.disabled) {\n                    return;\n                }\n                if (this.selected === null) {\n                    this.selected = 0;\n                } else {\n                    ++this.selected;\n                }\n                this.$emit('changed', this.degrees[this.selected].id);\n            },\n            selectPrevious() {\n                if (this.disabled) {\n                    return;\n                }\n                if (this.selected > 0) {\n                    --this.selected;\n                    this.$emit('changed', this.degrees[this.selected].id);\n                } else {\n                    this.selected = null;\n                    this.$emit('changed', null);\n                }\n            }\n        },\n        computed: {\n            starWidth: function() {\n                if (this.selected === null) {\n                    return 0;\n                }\n                return (this.selected + 1) * 100 / this.degrees.length;\n            },\n            degreeName: function() {\n                if (this.selected === null) {\n                    return this.strings.autoeval;\n                }\n                return this.strings.degree + \" \" + (this.selected + 1);\n            },\n            name: function() {\n                if (this.selected === null) {\n                    return this.strings.desc;\n                }\n                return this.degrees[this.selected].name;\n            },\n            description: function() {\n                if (this.selected === null) {\n                    return \"\";\n                }\n                return this.degrees[this.selected].description.replace(/\\n/g, \"<br />\");\n            },\n        },\n        template: `\n            <div class=\"row\" v-if=\"this.degrees.length > 0\">\n                <div class=\"col-xl-6 no-print\">\n                    <div class=\"d-flex flex-column justify-content-center degree-star-container\">\n                        <div class=\"d-flex flex-row align-items-center justify-content-center\">\n                            <div class=\"d-flex align-items-center justify-content-center degree-action degree-action-left\">\n                                <img :src=\"images.minus\" class=\"img-responsive invisible\" />\n                            </div>\n                            <div class=\"d-flex align-items-center justify-content-center degree-container\">\n                                <div\n                                    class=\"degree-star-mask\"\n                                    :style=\"'width: ' + starWidth + '%;\\\n                                        -webkit-mask-image: url(' + images.star + ');\\\n                                        mask-image: url(' + images.star + ');'\"\n                                >\n                                    <div\n                                        :style=\"'background-color: ' + color + ';\\\n                                            background: rgb(255,255,255);\\\n                                            background: linear-gradient(90deg, rgba(255,255,255,1) 0%, ' + color + ' 100%);'\"\n                                    >\n                                        <img :src=\"images.starContainer\" class=\"img-responsive invisible\" />\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"d-flex align-items-center justify-content-center degree-action degree-action-right\">\n                                <img :src=\"images.plus\" class=\"img-responsive invisible\" />\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"d-flex flex-row justify-content-center degree-background-container\">\n                        <div class=\"d-flex align-items-center justify-content-center degree-action degree-action-left\">\n                            <img :src=\"images.minus\" class=\"img-responsive\" v-if=\"selected != null\" v-on:click=\"selectPrevious\" />\n                        </div>\n                        <div class=\"d-flex align-items-center justify-content-center degree-container\">\n                            <img :src=\"images.starContainer\" class=\"img-responsive\" />\n                        </div>\n                        <div class=\"d-flex align-items-center justify-content-center degree-action degree-action-right\">\n                            <img :src=\"images.plus\" class=\"img-responsive\"\n                                v-if=\"selected == null || selected < this.degrees.length - 1\" v-on:click=\"selectNext\"\n                            />\n                        </div>\n                    </div>\n                    <div class=\"d-flex align-items-center justify-content-center\">\n                        <div class=\"degree-action degree-action-bottom\">\n                            <img :src=\"images.help\" class=\"img-responsive\" v-if=\"selected != null\" @click=\"showModal = true\" />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-xl-6 degree-desc\">\n                    <h3>{{ degreeName }}</h3>\n                    <p>{{ name }}</p>\n                </div>\n                <DegreeModalHelp v-if=\"showModal\" @close=\"showModal = false\" :itemName=\"itemName\" :color=\"color\"\n                    :degreeName=\"degreeName\" :name=\"name\" :description=\"description\"\n                />\n            </div>\n        `\n    };\n});\n"],"names":["define","DegreeModalHelp","components","props","degrees","type","Array","itemName","String","color","degree","Number","default","disabled","Boolean","data","images","this","$root","$data","strings","selected","parseInt","Object","keys","find","key","id","showModal","methods","selectNext","$emit","selectPrevious","computed","starWidth","length","degreeName","autoeval","name","desc","description","replace","template"],"mappings":"AAuBAA,4CAAO,CAAC,4CAA4C,SAASC,GACzD,MAAO,CACHC,WAAY,CACRD,gBAAmBA,GAEvBE,MAAO,CACHC,QAAS,CACLC,KAAMC,OAEVC,SAAU,CACNF,KAAMG,QAEVC,MAAO,CACHJ,KAAMG,QAEVE,OAAQ,CACJL,KAAMM,OACNC,QAAW,MAEfC,SAAU,CACNR,KAAMS,QACNF,SAAW,IAGnBG,KAAM,WACF,MAAO,CACHC,OAAQC,KAAKC,MAAMC,MAAMH,OACzBI,QAASH,KAAKC,MAAMC,MAAMC,QAC1BC,SAAUJ,KAAKP,OAASY,SAASC,OAAOC,KAAKP,KAAKb,SAC7CqB,MAAKC,GAAOT,KAAKb,QAAQsB,GAAKC,KAAOV,KAAKP,UAAW,KAC1DkB,WAAW,EAEnB,EACAC,QAAS,CACLC,UAAAA,GACQb,KAAKJ,WAGa,OAAlBI,KAAKI,SACLJ,KAAKI,SAAW,IAEdJ,KAAKI,SAEXJ,KAAKc,MAAM,UAAWd,KAAKb,QAAQa,KAAKI,UAAUM,IACtD,EACAK,cAAAA,GACQf,KAAKJ,WAGLI,KAAKI,SAAW,KACdJ,KAAKI,SACPJ,KAAKc,MAAM,UAAWd,KAAKb,QAAQa,KAAKI,UAAUM,MAElDV,KAAKI,SAAW,KAChBJ,KAAKc,MAAM,UAAW,OAE9B,GAEJE,SAAU,CACNC,UAAW,kBACe,OAAdjB,KAACI,SACE,EAEkB,KAArBJ,KAAKI,SAAW,GAAWJ,KAAKb,QAAQ+B,MACpD,EACAC,WAAY,kBACc,OAAdnB,KAACI,SACEJ,KAAKG,QAAQiB,SAEjBpB,KAAKG,QAAQV,OAAS,KAAOO,KAAKI,SAAW,EACxD,EACAiB,KAAM,WACE,OAAkB,OAAlBrB,KAAKI,SACEJ,KAAKG,QAAQmB,KAEjBtB,KAAKb,QAAQa,KAAKI,UAAUiB,IACvC,EACAE,YAAa,WACL,OAAkB,OAAlBvB,KAAKI,SACE,GAEJJ,KAAKb,QAAQa,KAAKI,UAAUmB,YAAYC,QAAQ,MAAO,SAClE,GAEJC,SAAU,2rHA0DlB"}