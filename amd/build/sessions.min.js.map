{"version":3,"file":"sessions.min.js","sources":["../src/sessions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Sessions.\n *\n * @copyright   2024 Nantes Universit√© <support-tice@univ-nantes.fr> (Commissioner)\n * @copyright   2024 E-learning Touch' <contact@elearningtouch.com> (Maintainer)\n * @copyright   2022 Kosmos <moodle@kosmos.fr> (Former maintainer)\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['vue', 'mod_otopo/color'], function(Vue, ColorPicker) {\n    return {\n        initDeleteSession: function(wwwroot) {\n            Array.from(document.querySelectorAll('.deletesession button')).forEach(el => el.addEventListener('click', () => {\n                var session = el.getAttribute('id').split('_').slice(-1)[0];\n                var o = document.getElementsByName('o')[0].value;\n                var id = document.getElementsByName('id[' + session + ']')[0].value;\n                if (id == 0) {\n                    el.remove();\n                    document.getElementById('fitem_id_name_' + session).remove();\n                    document.getElementById('fitem_id_color_' + session).remove();\n                    document.getElementById('fitem_id_allowsubmissionfromdate_' + session).remove();\n                    document.getElementById('fitem_id_allowsubmissiontodate_' + session).remove();\n                    document.getElementsByName('option_repeats')[0].value--;\n                } else {\n                    location.href = wwwroot + '/mod/otopo/view.php?o=' + o\n                        + \"&action=edit&object=sessions&session-delete=\" + session;\n                }\n            }));\n        },\n        initColorPicker: function() {\n            Array.from(document.getElementsByClassName('input-colorpicker')).forEach(el => {\n                /**\n                 * Initialise the colour picker :) Hoorah\n                 */\n                var input = el.querySelector('input');\n                new Vue({\n                    el: '#' + input.id,\n                    components: {\n                        'ColorPicker': ColorPicker,\n                    },\n                    data: function() {\n                        return {\n                            name: input.name,\n                            value: input.value,\n                        };\n                    },\n                    template: '<ColorPicker :name=\"name\" :color=\"value\"></ColorPicker>',\n                });\n            });\n        }\n    };\n});\n"],"names":["define","Vue","ColorPicker","initDeleteSession","wwwroot","Array","from","document","querySelectorAll","forEach","el","addEventListener","session","getAttribute","split","slice","o","getElementsByName","value","remove","getElementById","location","href","initColorPicker","getElementsByClassName","input","querySelector","id","components","data","name","template"],"mappings":"AAuBAA,OAAO,qBAAA,CAAC,MAAO,oBAAoB,SAASC,EAAKC,GAC7C,MAAO,CACHC,kBAAmB,SAASC,GACxBC,MAAMC,KAAKC,SAASC,iBAAiB,0BAA0BC,SAAQC,GAAMA,EAAGC,iBAAiB,SAAS,KACtG,IAAIC,EAAUF,EAAGG,aAAa,MAAMC,MAAM,KAAKC,OAAO,GAAG,GACrDC,EAAIT,SAASU,kBAAkB,KAAK,GAAGC,MAEjC,GADDX,SAASU,kBAAkB,MAAQL,EAAU,KAAK,GAAGM,OAE1DR,EAAGS,SACHZ,SAASa,eAAe,iBAAmBR,GAASO,SACpDZ,SAASa,eAAe,kBAAoBR,GAASO,SACrDZ,SAASa,eAAe,oCAAsCR,GAASO,SACvEZ,SAASa,eAAe,kCAAoCR,GAASO,SACrEZ,SAASU,kBAAkB,kBAAkB,GAAGC,SAEhDG,SAASC,KAAOlB,EAAU,yBAA2BY,EAC/C,+CAAiDJ,CAAAA,KAGnE,EACAW,gBAAiB,WACblB,MAAMC,KAAKC,SAASiB,uBAAuB,sBAAsBf,SAAQC,IAIrE,IAAIe,EAAQf,EAAGgB,cAAc,SAC7B,IAAIzB,EAAI,CACJS,GAAI,IAAMe,EAAME,GAChBC,WAAY,CACR1B,YAAeA,GAEnB2B,KAAM,WACF,MAAO,CACHC,KAAML,EAAMK,KACZZ,MAAOO,EAAMP,MAErB,EACAa,SAAU,2DACb,GAET,EAER"}