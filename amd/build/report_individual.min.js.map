{"version":3,"file":"report_individual.min.js","sources":["../src/report_individual.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Individual report.\n *\n * @copyright   2024 Nantes Universit√© <support-tice@univ-nantes.fr> (Commissioner)\n * @copyright   2024 E-learning Touch' <contact@elearningtouch.com> (Maintainer)\n * @copyright   2022 Kosmos <moodle@kosmos.fr> (Former maintainer)\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([], function() {\n    return {\n        init: function(cmid, wwwroot) {\n\n            /**\n             * Get sessions inputs.\n             *\n             * @returns {NodeList}\n             */\n            function getSessionsInputs() {\n                return document.querySelectorAll(\".sessions > input\");\n            }\n\n            /**\n             * Get enabled sessions.\n             *\n             * @returns {Array}\n             */\n            function getSessionsEnabled() {\n                const sessions = [];\n                const sessionsInputs = getSessionsInputs();\n                for (var i = 0; i < sessionsInputs.length; i++) {\n                    if (sessionsInputs[i].checked) {\n                        sessions.push(sessionsInputs[i].parentNode.dataset.user + '_' + sessionsInputs[i].value);\n                    }\n                }\n                return sessions;\n            }\n\n            /**\n             * Toggle a session.\n             */\n            function toggleBtn() {\n                const exportBtn = document.getElementById('export-csv');\n                if (exportBtn) {\n                    const sessionsEnabled = getSessionsEnabled();\n                    if (sessionsEnabled.length === 0) {\n                        exportBtn.classList.add('disabled');\n                    } else {\n                        exportBtn.classList.remove('disabled');\n                    }\n                }\n            }\n\n            toggleBtn();\n\n            const sessionsInputs = getSessionsInputs();\n            for (var i = 0; i < sessionsInputs.length; i++) {\n                sessionsInputs[i].addEventListener('click', function() {\n                    toggleBtn();\n                });\n            }\n\n            const exportBtn = document.getElementById('export-csv');\n            if (exportBtn) {\n                exportBtn.addEventListener('click', function(e) {\n                    e.preventDefault();\n                    if (!exportBtn.classList.contains('disabled')) {\n                        const sessionsEnabled = getSessionsEnabled();\n                        location.href = wwwroot + \"/mod/otopo/view.php?id=\" + cmid + \"&action=export&object=individual&sessions=\"\n                            + sessionsEnabled.join(',');\n                    }\n                });\n            }\n        }\n    };\n});\n"],"names":["define","init","cmid","wwwroot","getSessionsInputs","document","querySelectorAll","getSessionsEnabled","sessions","sessionsInputs","i","length","checked","push","parentNode","dataset","user","value","toggleBtn","exportBtn","getElementById","classList","add","remove","addEventListener","e","preventDefault","contains","sessionsEnabled","location","href","join"],"mappings":"AAuBAA,OAAO,8BAAA,IAAI,WACP,MAAO,CACHC,KAAM,SAASC,EAAMC,GAOjB,SAASC,IACL,OAAOC,SAASC,iBAAiB,oBACrC,CAOA,SAASC,IACL,MAAMC,EAAW,GACXC,EAAiBL,IACvB,IAAK,IAAIM,EAAI,EAAGA,EAAID,EAAeE,OAAQD,IACnCD,EAAeC,GAAGE,SAClBJ,EAASK,KAAKJ,EAAeC,GAAGI,WAAWC,QAAQC,KAAO,IAAMP,EAAeC,GAAGO,OAG1F,OAAOT,CACX,CAKA,SAASU,IACL,MAAMC,EAAYd,SAASe,eAAe,cACtCD,IAE+B,IADPZ,IACJI,OAChBQ,EAAUE,UAAUC,IAAI,YAExBH,EAAUE,UAAUE,OAAO,YAGvC,CAEAL,IAEA,MAAMT,EAAiBL,IACvB,IAAK,IAAIM,EAAI,EAAGA,EAAID,EAAeE,OAAQD,IACvCD,EAAeC,GAAGc,iBAAiB,SAAS,WACxCN,GACJ,IAGJ,MAAMC,EAAYd,SAASe,eAAe,cACtCD,GACAA,EAAUK,iBAAiB,SAAS,SAASC,GAEzC,GADAA,EAAEC,kBACGP,EAAUE,UAAUM,SAAS,YAAa,CAC3C,MAAMC,EAAkBrB,IACxBsB,SAASC,KAAO3B,EAAU,0BAA4BD,EAAO,6CACvD0B,EAAgBG,KAAK,IAC/B,CACJ,GAER,EAER"}