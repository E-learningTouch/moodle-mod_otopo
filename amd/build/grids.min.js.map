{"version":3,"file":"grids.min.js","sources":["../src/grids.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Grids.\n *\n * @copyright   2024 Nantes Universit√© <support-tice@univ-nantes.fr> (Commissioner)\n * @copyright   2024 E-learning Touch' <contact@elearningtouch.com> (Maintainer)\n * @copyright   2022 Kosmos <moodle@kosmos.fr> (Former maintainer)\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'core/ajax',\n    'mod_otopo/items/components/items',\n    'vue',\n    'mod_otopo/items/store',\n    'mod_otopo/items/ajax',\n    'core/log'\n], function(\n    Ajax,\n    Items,\n    Vue,\n    store,\n    ajax,\n    Log\n) {\n    return {\n        initGrid: function(otopo, hasOtopo, cmid = 0) {\n\n            /**\n             * Get strings.\n             *\n             * @returns {Object}\n             */\n            async function getStrings() { // eslint-disable-line no-unused-vars\n                var strings = {};\n                var promises = Ajax.call([\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemadditem'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemdeleteitem'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemchooseitemcolor'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemitem'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemdegree'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemadddegree'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemdeletedegree'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemdegreegrade'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'itemduplicateitem'\n                        }\n                    },\n                    {\n                        methodname: 'core_get_string',\n                        args: {\n                            component: 'otopo',\n                            stringid: 'stringlimit255'\n                        }\n                    },\n                ]);\n                strings.additem = await promises[0];\n                strings.deleteitem = await promises[1];\n                strings.chooseitemcolor = await promises[2];\n                strings.item = await promises[3];\n                strings.degree = await promises[4];\n                strings.adddegree = await promises[5];\n                strings.deletedegree = await promises[6];\n                strings.degreegrade = await promises[7];\n                strings.duplicateitem = await promises[8];\n                strings.stringlimit255 = await promises[9];\n\n                return strings;\n            }\n\n            /**\n             * Init the store.\n             *\n             * @param {Number} otopo\n             * @param {Number} cmid\n             */\n            async function initStore(otopo, cmid) {\n                var items = await ajax.getItems(otopo, cmid);\n                store.state.items = items;\n            }\n\n            initStore(otopo, cmid).then(() => {\n                otopo = parseInt(otopo);\n                getStrings().then((strings) => {\n                    new Vue({\n                        el: '#otopo-grid',\n                        components: {\n                            'Items': Items,\n                        },\n                        template: '<Items :otopo=\"otopo\"></Items>',\n                        data: {\n                            otopo: otopo,\n                            cmid: cmid,\n                            hasOtopo: hasOtopo,\n                            strings: strings,\n                            state: store.state\n                        }\n                    });\n                    return true;\n                }).catch(Log.error);\n                return true;\n            }).catch(Log.error);\n        }\n    };\n});\n"],"names":["define","Ajax","Items","Vue","store","ajax","Log","initGrid","otopo","hasOtopo","cmid","arguments","length","undefined","items","getItems","state","then","parseInt","async","strings","promises","call","methodname","args","component","stringid","additem","deleteitem","chooseitemcolor","item","degree","adddegree","deletedegree","degreegrade","duplicateitem","stringlimit255","getStrings","el","components","template","data","catch","error"],"mappings":"AAuBAA,OAAM,kBAAC,CACH,YACA,mCACA,MACA,wBACA,uBACA,aACD,SACCC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAO,CACHC,SAAU,SAASC,EAAOC,GA6FrB,IA7F+BC,EAAIC,UAAAC,OAAAD,QAAAE,IAAAF,UAAAE,GAAAF,UAAG,GAAA,GA0GvC,eALyBH,EAAOE,GAC5B,IAAII,QAAcT,EAAKU,SAASP,EAAOE,GACvCN,EAAMY,MAAMF,MAAQA,CACvB,EAED,CAAUN,EAAOE,GAAMO,MAAK,KACxBT,EAAQU,SAASV,GApGrBW,iBACI,IAAIC,EAAU,CAAA,EACVC,EAAWpB,EAAKqB,KAAK,CACrB,CACIC,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,gBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,mBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,wBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,aAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,eAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,kBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,qBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,oBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,sBAGlB,CACIH,WAAY,kBACZC,KAAM,CACFC,UAAW,QACXC,SAAU,qBAetB,OAXAN,EAAQO,cAAgBN,EAAS,GACjCD,EAAQQ,iBAAmBP,EAAS,GACpCD,EAAQS,sBAAwBR,EAAS,GACzCD,EAAQU,WAAaT,EAAS,GAC9BD,EAAQW,aAAeV,EAAS,GAChCD,EAAQY,gBAAkBX,EAAS,GACnCD,EAAQa,mBAAqBZ,EAAS,GACtCD,EAAQc,kBAAoBb,EAAS,GACrCD,EAAQe,oBAAsBd,EAAS,GACvCD,EAAQgB,qBAAuBf,EAAS,GAEjCD,CACX,CAeIiB,GAAapB,MAAMG,IACf,IAAIjB,EAAI,CACJmC,GAAI,cACJC,WAAY,CACRrC,MAASA,GAEbsC,SAAU,iCACVC,KAAM,CACFjC,MAAOA,EACPE,KAAMA,EACND,SAAUA,EACVW,QAASA,EACTJ,MAAOZ,EAAMY,UAGd,KACR0B,MAAMpC,EAAIqC,QACN,KACRD,MAAMpC,EAAIqC,MACjB,EAER"}