{"version":3,"file":"color.min.js","sources":["../src/color.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Color.\n *\n * @copyright   2024 Nantes Universit√© <support-tice@univ-nantes.fr> (Commissioner)\n * @copyright   2024 E-learning Touch' <contact@elearningtouch.com> (Maintainer)\n * @copyright   2022 Kosmos <moodle@kosmos.fr> (Former maintainer)\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['vuecolor'], function(VueColor) {\n    return {\n        components: {\n            'chrome-picker': VueColor.Chrome,\n        },\n        template: `\n            <div class=\"input-group color-picker\" ref=\"colorpicker\">\n            <input type=\"text\" :name=\"name\" class=\"form-control\" v-model=\"colorValue\" @focus=\"showPicker()\"\n                @input=\"updateFromInput\"\n            />\n            <span class=\"input-group-append color-picker-container\">\n                <span class=\"current-color input-group-text\" :style=\"'background-color: ' + colorValue\"\n                    @click=\"togglePicker()\"\n                ></span>\n                <chrome-picker :value=\"colors\" @input=\"updateFromPicker\" v-if=\"displayPicker\" />\n            </span>\n            </div>\n        `,\n        props: ['color', 'name'],\n        data: function() {\n            return {\n                colors: {\n                    hex: '#000000',\n                },\n                colorValue: '',\n                displayPicker: false,\n                firstCall: true,\n            };\n        },\n        mounted: function() {\n            this.setColor(this.color || '#000000');\n        },\n        methods: {\n            setColor(color) {\n                this.updateColors(color);\n                this.colorValue = color;\n            },\n            updateColors(color) {\n                if (color.slice(0, 1) == '#') {\n                    this.colors = {\n                        hex: color\n                    };\n                } else if (color.slice(0, 4) == 'rgba') {\n                    var rgba = color.replace(/^rgba?\\(|\\s+|\\)$/g, '').split(',');\n                    var hex = '#' + ((1 * Math.pow(2, 24))\n                        + (parseInt(rgba[0]) * Math.pow(2, 16))\n                        + (parseInt(rgba[1]) * Math.pow(2, 8))\n                        + parseInt(rgba[2])).toString(16).slice(1);\n                    this.colors = {\n                        hex: hex,\n                        a: rgba[3],\n                    };\n                }\n            },\n            showPicker() {\n                document.addEventListener('click', this.documentClick);\n                this.displayPicker = true;\n            },\n            hidePicker() {\n                document.removeEventListener('click', this.documentClick);\n                this.displayPicker = false;\n            },\n            togglePicker() {\n                if (this.displayPicker) {\n                    this.hidePicker();\n                } else {\n                    this.showPicker();\n                }\n            },\n            updateFromInput() {\n                this.updateColors(this.colorValue);\n            },\n            updateFromPicker(color) {\n                this.colors = color;\n                if (color.rgba.a == 1) {\n                    this.colorValue = color.hex;\n                } else {\n                    this.colorValue = 'rgba(' + color.rgba.r + ', '\n                        + color.rgba.g + ', '\n                        + color.rgba.b + ', '\n                        + color.rgba.a + ')';\n                }\n            },\n            documentClick(e) {\n                var el = this.$refs.colorpicker,\n                    target = e.target;\n                if (el !== target && !el.contains(target)) {\n                    this.hidePicker();\n                }\n            }\n        },\n        watch: {\n            colorValue(val) {\n                if (val) {\n                    this.updateColors(val);\n                    if (!this.firstCall) {\n                        this.$emit('input', val);\n                    }\n                    this.firstCall = false;\n                }\n            }\n        },\n    };\n});\n"],"names":["define","VueColor","components","Chrome","template","props","data","colors","hex","colorValue","displayPicker","firstCall","mounted","this","setColor","color","methods","updateColors","b","Math","pow","slice","rgba","replace","split","parseInt","toString","a","showPicker","document","addEventListener","documentClick","hidePicker","removeEventListener","togglePicker","updateFromInput","updateFromPicker","r","g","e","el","$refs","colorpicker","target","contains","watch","val","$emit"],"mappings":"AAuBAA,OAAM,kBAAC,CAAC,aAAa,SAASC,GAC1B,MAAO,CACHC,WAAY,CACR,gBAAiBD,EAASE,QAE9BC,SAAU,6nBAaVC,MAAO,CAAC,QAAS,QACjBC,KAAM,WACF,MAAO,CACHC,OAAQ,CACJC,IAAK,WAETC,WAAY,GACZC,eAAe,EACfC,WAAW,EAEnB,EACAC,QAAS,WACLC,KAAKC,SAASD,KAAKE,OAAS,UAChC,EACAC,QAAS,CACLF,QAAAA,CAASC,GACLF,KAAKI,aAAaF,GAClBF,KAAKJ,WAAaM,CACtB,EACAE,YAAAA,CAAaF,GAAOG,IAAAA,EAOUC,KAAKC,IAN/B,GAAyB,KAArBL,EAAMM,MAAM,EAAG,GACfR,KAAKN,OAAS,CACVC,IAAKO,QAEFA,GAAqB,QAArBA,EAAMM,MAAM,EAAG,GAAc,CACpC,IAAIC,EAAOP,EAAMQ,QAAQ,oBAAqB,IAAIC,MAAM,KACpDhB,EAAM,KAAQ,EAAIU,EAAS,EAAG,IAC3BO,SAASH,EAAK,IAAMJ,EAAS,EAAG,IAChCO,SAASH,EAAK,IAAMJ,EAAS,EAAG,GACjCO,SAASH,EAAK,KAAKI,SAAS,IAAIL,MAAM,GAC5CR,KAAKN,OAAS,CACVC,IAAKA,EACLmB,EAAGL,EAAK,GAEhB,CACJ,EACAM,UAAAA,GACIC,SAASC,iBAAiB,QAASjB,KAAKkB,eACxClB,KAAKH,eAAgB,CACzB,EACAsB,UAAAA,GACIH,SAASI,oBAAoB,QAASpB,KAAKkB,eAC3ClB,KAAKH,eAAgB,CACzB,EACAwB,YAAAA,GACQrB,KAAKH,cACLG,KAAKmB,aAELnB,KAAKe,YAEb,EACAO,eAAAA,GACItB,KAAKI,aAAaJ,KAAKJ,WAC3B,EACA2B,gBAAAA,CAAiBrB,GACbF,KAAKN,OAASQ,EAEVF,KAAKJ,WADW,GAAhBM,EAAMO,KAAKK,EACOZ,EAAMP,IAEN,QAAUO,EAAMO,KAAKe,EAAI,KACrCtB,EAAMO,KAAKgB,EAAI,KACfvB,EAAMO,KAAKJ,EAAI,KACfH,EAAMO,KAAKK,EAAI,GAE7B,EACAI,aAAAA,CAAcQ,GACV,IAAIC,EAAK3B,KAAK4B,MAAMC,YAChBC,EAASJ,EAAEI,OACXH,IAAOG,IAAWH,EAAGI,SAASD,IAC9B9B,KAAKmB,YAEb,GAEJa,MAAO,CACHpC,UAAAA,CAAWqC,GACHA,IACAjC,KAAKI,aAAa6B,IACbjC,KAAKF,WACNE,KAAKkC,MAAM,QAASD,GAExBjC,KAAKF,WAAY,EAEzB,GAGZ"}